{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T05:54:28.328Z"}
{"level":"info","message":"SIGTERM signal received: closing HTTP server","timestamp":"2025-04-08T06:13:00.602Z"}
{"level":"info","message":"HTTP server closed","timestamp":"2025-04-08T06:17:17.119Z"}
{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T06:17:17.304Z"}
{"level":"info","message":"Connecting to database...","timestamp":"2025-04-08T14:19:47.168Z"}
{"level":"info","message":"Connected to database","timestamp":"2025-04-08T14:19:47.215Z"}
{"level":"info","message":"Setting up database schema...","timestamp":"2025-04-08T14:19:47.216Z"}
{"level":"info","message":"Seeding database with initial data...","timestamp":"2025-04-08T14:19:47.243Z"}
{"level":"info","message":"✅ Database setup and seeding completed successfully","timestamp":"2025-04-08T14:19:47.250Z"}
{"level":"info","message":"Database connection closed","timestamp":"2025-04-08T14:19:47.253Z"}
{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T14:20:15.852Z"}
{"level":"info","message":"SIGTERM signal received: closing HTTP server","timestamp":"2025-04-08T14:20:37.973Z"}
{"level":"info","message":"HTTP server closed","timestamp":"2025-04-08T14:20:37.974Z"}
{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T14:20:38.149Z"}
{"level":"info","message":"SIGTERM signal received: closing HTTP server","timestamp":"2025-04-08T14:46:41.676Z"}
{"level":"info","message":"HTTP server closed","timestamp":"2025-04-08T14:46:41.677Z"}
{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T14:46:41.859Z"}
{"level":"info","message":"SIGTERM signal received: closing HTTP server","timestamp":"2025-04-08T14:55:07.625Z"}
{"level":"info","message":"HTTP server closed","timestamp":"2025-04-08T14:55:07.627Z"}
{"level":"info","message":"Server started on port 3000","timestamp":"2025-04-08T14:56:56.894Z"}
{"level":"info","message":"Connecting to database...","timestamp":"2025-04-08T15:07:09.044Z"}
{"level":"info","message":"Connected to database","timestamp":"2025-04-08T15:07:09.087Z"}
{"level":"info","message":"Setting up database schema...","timestamp":"2025-04-08T15:07:09.090Z"}
{"level":"info","message":"Seeding database with initial data...","timestamp":"2025-04-08T15:07:09.113Z"}
{"level":"info","message":"✅ Database setup and seeding completed successfully","timestamp":"2025-04-08T15:07:09.120Z"}
{"level":"info","message":"Database connection closed","timestamp":"2025-04-08T15:07:09.122Z"}
{"level":"info","message":"Attempting to connect to database...","timestamp":"2025-04-08T15:08:15.363Z"}
{"level":"info","message":"✅ Database connection established successfully","timestamp":"2025-04-08T15:08:15.663Z"}
{"level":"info","message":"Testing entity queries...","timestamp":"2025-04-08T15:08:15.663Z"}
{"level":"info","message":"Found 2 users in the database","timestamp":"2025-04-08T15:08:15.668Z"}
{"level":"info","message":"Found 6 products in the database","timestamp":"2025-04-08T15:08:15.669Z"}
{"level":"info","message":"Found 6 new products in the database","timestamp":"2025-04-08T15:08:15.674Z"}
{"level":"info","message":"Found 2 orders in the database","timestamp":"2025-04-08T15:08:15.679Z"}
{"level":"info","message":"Database connection established","timestamp":"2025-04-09 12:14:09:149"}
{"level":"info","message":"Server running on port 8080 in dev mode","timestamp":"2025-04-09 12:14:09:149"}
{"level":"info","message":"Health check available at http://localhost:8080/health","timestamp":"2025-04-09 12:14:09:149"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:14:52 +0000] \"GET /health HTTP/1.1\" 200 89 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:14:52:1452"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:14:52 +0000] \"GET /favicon.ico HTTP/1.1\" 404 150 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:14:52:1452"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:17:42 +0000] \"GET /api-docs HTTP/1.1\" 404 147 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:17:42:1742"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:33:05 +0000] \"GET /auth HTTP/1.1\" 404 143 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:33:05:335"}
{"level":"warn","message":"Route not found: GET /api/auth","timestamp":"2025-04-09 12:33:14:3314"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:33:14 +0000] \"GET /api/auth HTTP/1.1\" 404 51 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:33:14:3314"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:33:24 +0000] \"GET /api HTTP/1.1\" 404 142 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:33:24:3324"}
{"level":"http","message":"::1 - - [09/Apr/2025:11:33:34 +0000] \"GET /health HTTP/1.1\" 200 89 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-09 12:33:34:3334"}
{"level":"info","message":"SIGINT signal received: closing HTTP server","timestamp":"2025-04-09 13:20:01:201"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:45:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-04-09 16:11:45:1145"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:11:46:1146"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:11:46:1146"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:11:47:1147"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:11:47:1147"}
{"level":"info","message":"Initializing test database connection","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"info","message":"Test database connection initialized","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"info","message":"Cleaning up test data","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"info","message":"Test data cleanup completed","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"info","message":"Creating test user existing@example.com","timestamp":"2025-04-09 16:26:35:2635"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Creating test user login@example.com","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Creating test user protected@example.com","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Closing test database connection","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 16:26:36:2636"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:61:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:26:38:2638"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:86:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:26:38:2638"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:114:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:26:38:2638"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:137:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:26:38:2638"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:39:2639"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:39:2639"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:40:2640"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 16:26:40:2640"}
{"level":"info","message":"Initializing test database connection","timestamp":"2025-04-09 16:57:35:5735"}
{"level":"error","message":"Error initializing test database: test_database_1.default.initialize is not a function","stack":"TypeError: test_database_1.default.initialize is not a function\n    at initializeTestDatabase (/Users/davest/Desktop/storefront-api/src/__tests__/helpers/test-utils.ts:14:28)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/integration/auth.routes.test.ts:18:33)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:57:35:5735"}
{"level":"info","message":"Initializing test database connection","timestamp":"2025-04-09 16:57:35:5735"}
{"level":"error","message":"Error initializing test database: test_database_1.default.initialize is not a function","stack":"TypeError: test_database_1.default.initialize is not a function\n    at initializeTestDatabase (/Users/davest/Desktop/storefront-api/src/__tests__/helpers/test-utils.ts:14:28)\n    at createTestUser (/Users/davest/Desktop/storefront-api/src/__tests__/helpers/test-utils.ts:51:13)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/integration/auth.routes.test.ts:125:39)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:57:35:5735"}
{"level":"error","message":"Error creating test user: test_database_1.default.initialize is not a function","stack":"TypeError: test_database_1.default.initialize is not a function\n    at initializeTestDatabase (/Users/davest/Desktop/storefront-api/src/__tests__/helpers/test-utils.ts:14:28)\n    at createTestUser (/Users/davest/Desktop/storefront-api/src/__tests__/helpers/test-utils.ts:51:13)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/integration/auth.routes.test.ts:125:39)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 16:57:35:5735"}
{"level":"info","message":"Initializing test database connection","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Test database connection initialized","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Cleaning up test data","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Test data cleanup completed","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Creating test user existing@example.com","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Creating test user login@example.com","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:45:745"}
{"level":"info","message":"Creating test user protected@example.com","timestamp":"2025-04-09 17:07:45:745"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:46:746"}
{"level":"info","message":"Closing test database connection","timestamp":"2025-04-09 17:07:46:746"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:07:46:746"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findOne [as findByEmail] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at findByEmail (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.createQueryBuilder [as findByEmailWithPassword] (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at next (/Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at verify (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:07:47:747"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:07:47:747"}
{"level":"info","message":"Initializing test database connection","timestamp":"2025-04-09 17:17:28:1728"}
{"level":"info","message":"Test database connection initialized","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Cleaning up test data","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Test data cleanup completed","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findByEmail (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at signup (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Creating test user existing@example.com","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in signup: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.findOne (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:597:42)\n    at UserRepository.findByEmail (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:11:17)\n    at signup (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:20:47)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Creating test user login@example.com","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at login (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at login (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at login (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Creating test user protected@example.com","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"Error in login: No metadata for \"User\" was found.","stack":"EntityMetadataNotFoundError: No metadata for \"User\" was found.\n    at DataSource.getMetadata (/Users/davest/Desktop/storefront-api/src/data-source/DataSource.ts:450:30)\n    at UserRepository.get metadata [as metadata] (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:53:40)\n    at UserRepository.createQueryBuilder (/Users/davest/Desktop/storefront-api/src/repository/Repository.ts:82:18)\n    at UserRepository.findByEmailWithPassword (/Users/davest/Desktop/storefront-api/src/repositories/user.repository.ts:15:17)\n    at login (/Users/davest/Desktop/storefront-api/src/controllers/auth.controller.ts:81:39)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at /Users/davest/Desktop/storefront-api/src/middleware/validation.middleware.ts:25:7\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"500 - No metadata for \"User\" was found. - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Closing test database connection","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:17:29:1729"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:17:30:1730"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:17:30:1730"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:30:1730"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:30:1730"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:31:1731"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:17:31:1731"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:17:31:1731"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:17:31:1731"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:17:31:1731"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:30:39:3039"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-09 17:30:39:3039"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-09 17:30:40:3040"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:40:3040"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:40:3040"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-09 17:30:40:3040"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:30:40:3040"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:30:41:3041"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:30:42:3042"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:30:42:3042"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:42:3042"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:42:3042"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:43:3043"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:30:43:3043"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:30:43:3043"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:30:43:3043"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:30:43:3043"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:46:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 17:30:44:3044"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:69:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 17:35:04:354"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:92:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 17:35:04:354"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:35:04:354"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-09 17:35:04:354"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-09 17:35:05:355"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:05:355"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:05:355"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-09 17:35:05:355"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:06:356"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:06:356"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:06:356"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:06:356"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:35:06:356"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:35:07:357"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:35:07:357"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:07:357"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:07:357"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:08:358"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:35:08:358"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:35:08:358"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:35:08:358"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:35:08:358"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:37:07:377"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-09 17:37:08:378"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-09 17:37:08:378"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:08:378"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:08:378"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-09 17:37:09:379"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:37:09:379"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:09:379"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:37:09:379"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:09:379"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-09 17:37:09:379"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:37:10:3710"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:37:11:3711"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:37:34:3734"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-09 17:37:34:3734"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-09 17:37:35:3735"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:35:3735"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:35:3735"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-09 17:37:35:3735"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:36:3736"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:37:37:3737"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:37:37:3737"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:37:37:3737"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:37:3737"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:37:3737"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:38:3738"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:37:38:3738"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:37:38:3738"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:37:38:3738"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:37:38:3738"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:38:38:3838"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-09 17:38:38:3838"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-09 17:38:39:3839"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:39:3839"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:39:3839"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-09 17:38:39:3839"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:38:39:3839"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-09 17:38:40:3840"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-09 17:38:41:3841"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:69:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 17:38:43:3843"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Object.<anonymous> (/Users/davest/Desktop/storefront-api/src/__tests__/unit/auth.middleware.test.ts:92:18)\n    at Promise.then.completed (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/davest/Desktop/storefront-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/davest/Desktop/storefront-api/node_modules/jest-runner/build/runTest.js:444:34)","timestamp":"2025-04-09 17:38:43:3843"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 08:29:15:2915"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-10 08:29:16:2916"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-10 08:29:16:2916"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:16:2916"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:16:2916"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-10 08:29:16:2916"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 08:29:17:2917"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:17:2917"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 08:29:17:2917"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:17:2917"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-10 08:29:17:2917"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:18:2918"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:19:2919"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 08:29:19:2919"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 08:29:19:2919"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 08:29:19:2919"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 08:29:19:2919"}
{"level":"info","message":"Database connection established","timestamp":"2025-04-10 09:08:35:835"}
{"level":"info","message":"Server running on port 8080 in dev mode","timestamp":"2025-04-10 09:08:35:835"}
{"level":"info","message":"Health check available at http://localhost:8080/health","timestamp":"2025-04-10 09:08:35:835"}
{"level":"info","message":"SIGINT signal received: closing HTTP server","timestamp":"2025-04-10 09:08:42:842"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:02:27:227"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-10 17:02:28:228"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-10 17:02:29:229"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:29:229"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:29:229"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-10 17:02:29:229"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 17:02:29:229"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:29:229"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 17:02:29:229"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:29:229"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-10 17:02:30:230"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:30:230"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-10 17:02:30:230"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:30:230"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/logout - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:30:230"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:02:30:230"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:02:31:231"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:02:31:231"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:31:231"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:31:231"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:32:232"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:02:32:232"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:02:32:232"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:02:32:232"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:02:32:232"}
{"level":"info","message":"Initializing database connection...","timestamp":"2025-04-10 17:25:08:258"}
{"level":"info","message":"Database connection initialized successfully","timestamp":"2025-04-10 17:25:09:259"}
{"level":"info","message":"Running migrations...","timestamp":"2025-04-10 17:25:09:259"}
{"code":"42601","driverError":{"code":"42601","file":"scan.l","length":92,"line":"1248","name":"error","position":"16","routine":"scanner_yyerror","severity":"ERROR"},"file":"scan.l","length":92,"level":"error","line":"1248","message":"Error running migrations: syntax error at or near \"NOT\"","position":"16","query":"CREATE TYPE IF NOT EXISTS user_role AS ENUM ('customer', 'admin')","routine":"scanner_yyerror","severity":"ERROR","stack":"QueryFailedError: syntax error at or near \"NOT\"\n    at PostgresQueryRunner.query (/Users/davest/Desktop/storefront-api/node_modules/typeorm/src/driver/postgres/PostgresQueryRunner.ts:328:19)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AddUserRoles1713567000000.up (/Users/davest/Desktop/storefront-api/src/migrations/1713567000000-add-user-roles.ts:8:5)\n    at async MigrationExecutor.executePendingMigrations (/Users/davest/Desktop/storefront-api/node_modules/src/migration/MigrationExecutor.ts:336:17)\n    at async DataSource.runMigrations (/Users/davest/Desktop/storefront-api/node_modules/src/data-source/DataSource.ts:403:13)\n    at async runMigrations (/Users/davest/Desktop/storefront-api/src/scripts/run-migrations.ts:13:24)","timestamp":"2025-04-10 17:25:09:259"}
{"level":"info","message":"Initializing database connection...","timestamp":"2025-04-10 17:26:38:2638"}
{"level":"info","message":"Database connection initialized successfully","timestamp":"2025-04-10 17:26:38:2638"}
{"level":"info","message":"Running migrations...","timestamp":"2025-04-10 17:26:38:2638"}
{"level":"info","message":"Successfully ran 1 migrations:","timestamp":"2025-04-10 17:26:38:2638"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:56:2656"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:26:57:2657"}
{"level":"info","message":"Test user created for integration tests","timestamp":"2025-04-10 17:26:58:2658"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-10 17:26:58:2658"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:58:2658"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:58:2658"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"info","message":"Test user login@example.com already exists, returning existing user","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-10 17:26:59:2659"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:00:270"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-10 17:27:00:270"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:00:270"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:27:00:270"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:27:00:270"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:27:00:270"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:01:271"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:01:271"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:01:271"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:27:01:271"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:27:01:271"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:27:01:271"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:27:01:271"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:11:4411"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:44:12:4412"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:44:13:4413"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:13:4413"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:13:4413"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:14:4414"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:44:14:4414"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:44:14:4414"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:44:14:4414"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:44:14:4414"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:37:4537"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:45:38:4538"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:45:39:4539"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:45:42:4542"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:45:42:4542"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-10 17:45:42:4542"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:43:4543"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:43:4543"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-10 17:45:43:4543"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:43:4543"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:43:4543"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-10 17:45:44:4544"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:44:4544"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-10 17:45:44:4544"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:45:44:4544"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:45:44:4544"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:07:477"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:08:478"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:08:478"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:08:478"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-10 17:47:08:478"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-10 17:47:08:478"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:47:09:479"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:47:10:4710"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:54:4754"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:55:4755"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:56:4756"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:56:4756"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:47:56:4756"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:47:56:4756"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:47:56:4756"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-10 17:47:58:4758"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-10 17:47:59:4759"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-10 17:47:59:4759"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:59:4759"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:47:59:4759"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-10 17:47:59:4759"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:48:00:480"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:48:00:480"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-10 17:48:00:480"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:48:01:481"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-10 17:48:01:481"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-10 17:48:01:481"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 11:01:47:147"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 11:01:47:147"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-11 11:01:47:147"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:47:147"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:47:147"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-11 11:01:48:148"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:48:148"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:48:148"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-11 11:01:48:148"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:49:149"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-11 11:01:49:149"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-11 11:01:49:149"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 11:01:49:149"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:50:150"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:50:150"}
{"level":"error","message":"400 - Email is already in use - /api/users/profile - PATCH - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:50:150"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/users/admin/users - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:50:150"}
{"level":"info","message":"Password reset token created for test@example.com","timestamp":"2025-04-11 11:01:50:150"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-11 11:01:50:150"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 11:01:51:151"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 11:01:51:151"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:51:151"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:51:151"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:52:152"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 11:01:52:152"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 11:01:52:152"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 11:01:52:152"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 11:01:52:152"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 12:40:11:4011"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 12:40:12:4012"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-11 12:40:12:4012"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:12:4012"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:12:4012"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-11 12:40:13:4013"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:13:4013"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:13:4013"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-11 12:40:13:4013"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 12:40:14:4014"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:15:4015"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: GET /api/users/profile","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: PATCH /api/users/profile","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: PATCH /api/users/profile","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: GET /api/users/admin/users","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: GET /api/users/admin/users","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: PATCH /api/users/admin/users/1/role","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"warn","message":"Route not found: POST /api/users/forgot-password","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"info","message":"Skipping password reset test - token not available","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 12:40:16:4016"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 12:40:17:4017"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:18:2618"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:19:2619"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:26:20:2620"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:26:20:2620"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-11 16:26:20:2620"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:21:2621"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:21:2621"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-11 16:26:21:2621"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:26:22:2622"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:26:23:2623"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:29:2929"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:30:2930"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:29:30:2930"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:29:30:2930"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-11 16:29:31:2931"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:31:2931"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:31:2931"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-11 16:29:31:2931"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:29:32:2932"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:29:33:2933"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:29:33:2933"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:33:2933"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:33:2933"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:34:2934"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:34:2934"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:29:34:2934"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:29:34:2934"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:29:34:2934"}
{"level":"error","message":"404 - Product not found with id: non-existent-id - /api/products/non-existent-id - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"400 - Invalid category: invalid-category - /api/products/category/invalid-category - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"400 - Validation error: productName: Required; price: Price must be a positive number; category: Category must be one of: headphones, speakers, earphones; imageName: Required - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"404 - Product not found with id: non-existent-id - /api/products/non-existent-id - PUT - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:29:37:2937"}
{"level":"error","message":"404 - Product not found with id: non-existent-id - /api/products/non-existent-id - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:56:3056"}
{"level":"error","message":"400 - Invalid category: invalid-category - /api/products/category/invalid-category - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:56:3056"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:56:3056"}
{"level":"error","message":"403 - You do not have permission to perform this action - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:57:3057"}
{"level":"error","message":"400 - Validation error: productName: Required; price: Price must be a positive number; category: Category must be one of: headphones, speakers, earphones; imageName: Required - /api/products - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:57:3057"}
{"level":"error","message":"404 - Product not found with id: non-existent-id - /api/products/non-existent-id - PUT - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:57:3057"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:57:3057"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:58:3058"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:30:58:3058"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:30:59:3059"}
{"level":"info","message":"Test user existing@example.com created","timestamp":"2025-04-11 16:30:59:3059"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:59:3059"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:30:59:3059"}
{"level":"info","message":"Test user login@example.com created","timestamp":"2025-04-11 16:31:00:310"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:00:310"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:00:310"}
{"level":"info","message":"Test user protected@example.com created","timestamp":"2025-04-11 16:31:00:310"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:01:311"}
{"level":"error","message":"JWT verification error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (/Users/davest/Desktop/storefront-api/node_modules/jsonwebtoken/verify.js:70:17)\n    at protect (/Users/davest/Desktop/storefront-api/src/middleware/auth.middleware.ts:38:27)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:328:13)\n    at /Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/davest/Desktop/storefront-api/node_modules/express/lib/router/index.js:280:10)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:822:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /Users/davest/Desktop/storefront-api/node_modules/express-rate-limit/dist/index.cjs:704:5","timestamp":"2025-04-11 16:31:01:311"}
{"level":"error","message":"401 - Invalid token. Please log in again. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user existing@example.com deleted","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user login@example.com deleted","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user protected@example.com deleted","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test database initialized","timestamp":"2025-04-11 16:31:01:311"}
{"level":"info","message":"Test user test@example.com created","timestamp":"2025-04-11 16:31:01:311"}
{"level":"error","message":"400 - Email already in use - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:02:312"}
{"level":"error","message":"400 - Validation error: password: Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, and one number - /api/auth/signup - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:02:312"}
{"level":"error","message":"401 - Incorrect email or password - /api/auth/login - POST - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:02:312"}
{"level":"error","message":"401 - You are not logged in. Please log in to get access. - /api/auth/me - GET - ::ffff:127.0.0.1","timestamp":"2025-04-11 16:31:02:312"}
{"level":"info","message":"Test user test@example.com deleted","timestamp":"2025-04-11 16:31:02:312"}
{"level":"info","message":"Test user new@example.com deleted","timestamp":"2025-04-11 16:31:02:312"}
{"level":"info","message":"Test database connection closed","timestamp":"2025-04-11 16:31:02:312"}
{"level":"info","message":"Database connection established","timestamp":"2025-04-11 18:39:07:397"}
{"level":"info","message":"Server running on port 8080 in dev mode","timestamp":"2025-04-11 18:39:07:397"}
{"level":"info","message":"Health check available at http://localhost:8080/health","timestamp":"2025-04-11 18:39:07:397"}
{"level":"http","message":"::1 - - [11/Apr/2025:17:40:27 +0000] \"GET /health HTTP/1.1\" 200 89 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-11 18:40:27:4027"}
{"level":"http","message":"::1 - - [11/Apr/2025:17:40:38 +0000] \"GET /products HTTP/1.1\" 404 147 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-11 18:40:38:4038"}
{"level":"http","message":"::1 - - [11/Apr/2025:17:40:48 +0000] \"GET /api/products HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-11 18:40:48:4048"}
{"level":"info","message":"SIGINT signal received: closing HTTP server","timestamp":"2025-04-12 08:43:05:435"}
{"level":"info","message":"Database connection established","timestamp":"2025-04-14 08:39:19:3919"}
{"level":"info","message":"Server running on port 8080 in dev mode","timestamp":"2025-04-14 08:39:19:3919"}
{"level":"info","message":"Health check available at http://localhost:8080/health","timestamp":"2025-04-14 08:39:19:3919"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:39:26 +0000] \"GET /api/products HTTP/1.1\" 304 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:39:26:3926"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs HTTP/1.1\" 301 162 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/ HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/swagger-ui-init.js HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/swagger-ui.css HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/swagger-ui-standalone-preset.js HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/swagger-ui-bundle.js HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
{"level":"http","message":"::1 - - [14/Apr/2025:07:40:30 +0000] \"GET /api/api-docs/favicon-32x32.png HTTP/1.1\" 200 628 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"","timestamp":"2025-04-14 08:40:30:4030"}
